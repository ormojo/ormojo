import React from 'react'
import { ObserveMap } from './ObserveMap'
import { combineLatest } from '@ormojo/fobs'

toCombined(source) ->
  combineLatest(source)

export ObserveMany(props) ->
  { children: renderProp } = props
  <ObserveMap {...props} map={toCombined}>{(val) ->
    if val~looseEq(null):
      renderProp({})
    else:
      renderProp(val)
  }</ObserveMap>
