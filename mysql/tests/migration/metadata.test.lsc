'use @oigroup/lightscript with noEnforcedSubscriptIndentation'
import { createBackend } from '../backend'

util = require('util')

let backend

beforeAll! ->
  now backend = createBackend()
  Promise.resolve(true)

afterAll! ->
  backend.shutdown()

describe! 'migration metadata', (): void ->
  it! 'should enumerate database state', -/>
    mig = backend.createMigration()
    tables <- mig._enumerateExistingTables()
    <- tables._getAllTableMetadata()
    console.log(util.inspect(tables.toJSON(), false, null))
