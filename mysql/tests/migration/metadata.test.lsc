'use @oigroup/lightscript with noEnforcedSubscriptIndentation'
import { createBackend } from '../backend'

util = require('util')

let backend

beforeAll! ->
  now backend = createBackend()
  Promise.resolve(true)

afterAll! ->
  backend.shutdown()

describe! 'migration metadata', ->
  it! 'should enumerate database state', ->
    mig = backend.createMigration()
    mig._enumerateExistingTables()
    .then! ->
      mig.existingTables._getAllTableMetadata()
    .then! ->
      console.log(util.inspect(mig.existingTables.toJSON(), false, null))
