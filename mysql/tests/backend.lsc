// Make the MySQL driver for testing
// Do not expose credentials for a live server to git!
import { MySQLBackend } from '..'
mysql2 = require('mysql2/promise')

logger = console.log.bind(console)

export createBackend() ->
  new MySQLBackend(mysql2, {
    host: 'localhost'
    user: 'drivertest'
    password: 'drivertest'
    database: 'drivertest'
    pool: true
    log: {
      trace: if process.env.SQL_TRACE: logger else: (-> return)
      debug: logger
      info: logger
      warn: logger
      error: logger
      fatal: logger
    }
  })
