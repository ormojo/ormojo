import { entity, field, augment, toPlainObject, createMemoryDelta as create, setFieldType, isDelta, types, typeFrom, Entity } from '@ormojo/ephraim'

test! 'basic', ->
  @entity({name: "E"}) class E extends Entity:
    @field(types.date) d

  @entity({name: "F", inherits: [E]}) class F extends Entity:
    @field() f

  debugger
  e = create(F)
  e.f = 1

  expect(e.f).toBe(1)
  expect(e~isDelta!).toBe(true)
  expect(typeFrom(F).isKindOf(E)).toBeTruthy()
  expect(typeFrom(F).opaqueFields.d).toBeTruthy()
